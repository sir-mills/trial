"use strict";exports.id=382,exports.ids=[382],exports.modules={10884:(r,e,t)=>{r.exports=t(30517)},84963:(r,e,t)=>{e.v=void 0;let i=t(29152),a=t(94679),n=t(39942),o=t(88519);class s{constructor(r){this.config=r,this.db=null}on(r,e){this.db.on(r,e)}getDatabaseInstance(){return this.db}open(){return new Promise((r,e)=>{let{filename:t,mode:i,driver:a}=this.config;if(null==t)throw Error("sqlite: filename cannot be null / undefined");if(!a)throw Error("sqlite: driver is not defined");i?this.db=new a(t,i,t=>{if(t)return e((0,o.formatError)(t));r()}):this.db=new a(t,t=>{if(t)return e((0,o.formatError)(t));r()})})}close(){return new Promise((r,e)=>{this.db.close(t=>{if(t)return e((0,o.formatError)(t));r()})})}configure(r,e){this.db.configure(r,e)}run(r,...e){return new Promise((t,a)=>{let s=(0,n.toSqlParams)(r,e);this.db.run(s.sql,...s.params,function(r){if(r)return a((0,o.formatError)(r));t({stmt:new i.Statement(this.stmt),lastID:this.lastID,changes:this.changes})})})}get(r,...e){return new Promise((t,i)=>{let a=(0,n.toSqlParams)(r,e);this.db.get(a.sql,...a.params,(r,e)=>{if(r)return i((0,o.formatError)(r));t(e)})})}each(r,...e){return new Promise((t,i)=>{let a=e.pop();if(!a||"function"!=typeof a)throw Error("sqlite: Last param of Database#each() must be a callback function");if(e.length>0){let r=e.pop();if("function"==typeof r)throw Error("sqlite: Database#each() should only have a single callback defined. See readme for usage.");e.push(r)}let s=(0,n.toSqlParams)(r,e);this.db.each(s.sql,...s.params,(r,e)=>{if(r)return a((0,o.formatError)(r),null);a(null,e)},(r,e)=>{if(r)return i((0,o.formatError)(r));t(e)})})}all(r,...e){return new Promise((t,i)=>{let a=(0,n.toSqlParams)(r,e);this.db.all(a.sql,...a.params,(r,e)=>{if(r)return i((0,o.formatError)(r));t(e)})})}exec(r){return new Promise((e,t)=>{let i=(0,n.toSqlParams)(r);this.db.exec(i.sql,r=>{if(r)return t((0,o.formatError)(r));e()})})}prepare(r,...e){return new Promise((t,a)=>{let o=(0,n.toSqlParams)(r,e),s=this.db.prepare(o.sql,...o.params,r=>{if(r)return a(r);t(new i.Statement(s))})})}loadExtension(r){return new Promise((e,t)=>{this.db.loadExtension(r,r=>{if(r)return t((0,o.formatError)(r));e()})})}async migrate(r){await (0,a.migrate)(this,r)}serialize(){throw Error("sqlite: Currently not implemented. Use getDatabaseInstance().serialize() instead.")}parallelize(){throw Error("sqlite: Currently not implemented. Use getDatabaseInstance().parallelize() instead.")}}e.v=s},29152:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Statement=void 0;let i=t(88519);class a{constructor(r){this.stmt=r}getStatementInstance(){return this.stmt}bind(...r){return new Promise((e,t)=>{this.stmt.bind(...r,r=>{if(r)return t((0,i.formatError)(r));e()})})}reset(){return new Promise(r=>{this.stmt.reset(()=>{r()})})}finalize(){return new Promise((r,e)=>{this.stmt.finalize(t=>{if(t)return e((0,i.formatError)(t));r()})})}run(...r){return new Promise((e,t)=>{let a=this;this.stmt.run(...r,function(r){if(r)return t((0,i.formatError)(r));e({stmt:a,lastID:this.lastID,changes:this.changes})})})}get(...r){return new Promise((e,t)=>{this.stmt.get(...r,(r,a)=>{if(r)return t((0,i.formatError)(r));e(a)})})}all(...r){return new Promise((e,t)=>{this.stmt.all(...r,(r,a)=>{if(r)return t((0,i.formatError)(r));e(a)})})}each(...r){return new Promise((e,t)=>{let a=r.pop();if(!a||"function"!=typeof a)throw Error("sqlite: Last param of Statement#each() must be a callback function");if(r.length>0){let e=r.pop();if("function"==typeof e)throw Error("sqlite: Statement#each() should only have a single callback defined. See readme for usage.");r.push(e)}this.stmt.each(...r,(r,e)=>{if(r)return a((0,i.formatError)(r),null);a(null,e)},(r,a)=>{if(r)return t((0,i.formatError)(r));e(a)})})}}e.Statement=a},88519:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.formatError=void 0,e.formatError=function(r){if(r instanceof Error)return r;if("object"==typeof r){let e=Error();for(let t in r)e[t]=r[t];return r.message&&(e.message=r.message),e}return Error(r)}},94679:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.migrate=e.readMigrations=void 0;let i=t(57147),a=t(71017);async function n(r){let e=r||a.join(process.cwd(),"migrations"),t=a.resolve(e),n=await new Promise((r,e)=>{i.readdir(t,(t,i)=>{if(t)return e(t);r(i.map(r=>r.match(/^(\d+).(.*?)\.sql$/)).filter(r=>null!==r).map(r=>({id:Number(r[1]),name:r[2],filename:r[0]})).sort((r,e)=>Math.sign(r.id-e.id)))})});if(!n.length)throw Error(`No migration files found in '${t}'.`);return Promise.all(n.map(r=>new Promise((e,n)=>{let o=a.join(t,r.filename);i.readFile(o,"utf-8",(t,i)=>{if(t)return n(t);let[a,o]=i.split(/^--\s+?down\b/im);r.up=a.replace(/^-- .*?$/gm,"").trim(),r.down=o?o.trim():"",e(r)})})))}async function o(r,e={}){e.force=e.force||!1,e.table=e.table||"migrations";let{force:t,table:i}=e,a=e.migrations?e.migrations:await n(e.migrationsPath);await r.run(`CREATE TABLE IF NOT EXISTS "${i}" (
  id   INTEGER PRIMARY KEY,
  name TEXT    NOT NULL,
  up   TEXT    NOT NULL,
  down TEXT    NOT NULL
)`);let o=await r.all(`SELECT id, name, up, down FROM "${i}" ORDER BY id ASC`),s=a[a.length-1];for(let e of o.slice().sort((r,e)=>Math.sign(e.id-r.id)))if(!a.some(r=>r.id===e.id)||t&&e.id===s.id){await r.run("BEGIN");try{await r.exec(e.down),await r.run(`DELETE FROM "${i}" WHERE id = ?`,e.id),await r.run("COMMIT"),o=o.filter(r=>r.id!==e.id)}catch(e){throw await r.run("ROLLBACK"),e}}else break;let l=o.length?o[o.length-1].id:0;for(let e of a)if(e.id>l){await r.run("BEGIN");try{await r.exec(e.up),await r.run(`INSERT INTO "${i}" (id, name, up, down) VALUES (?, ?, ?, ?)`,e.id,e.name,e.up,e.down),await r.run("COMMIT")}catch(e){throw await r.run("ROLLBACK"),e}}}e.readMigrations=n,e.migrate=o},39942:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toSqlParams=void 0,e.toSqlParams=function(r,e=[]){return"string"==typeof r?{sql:r,params:e}:{sql:r.sql,params:r.values}}},64947:(r,e,t)=>{t.d(e,{bA:()=>a}),t(29152);var i=t(84963);async function a(r){let e=new i.v(r);return await e.open(),e}}};