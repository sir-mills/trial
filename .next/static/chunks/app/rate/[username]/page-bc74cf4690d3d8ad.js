(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{6127:function(e,l,s){Promise.resolve().then(s.bind(s,6948))},6948:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return d}});var n=s(7437),a=s(3611),t=s(9598),r=s(8389),i=s(2147),c=s(23),u=s(2749),o=s(2265);function d(e){let{params:l}=e,{username:s}=l,[d,x]=(0,o.useState)(null),[f,m]=(0,o.useState)(null),[h,g]=(0,o.useState)(3),[w,j]=(0,o.useState)(""),[p,v]=(0,o.useState)(!1),[N,S]=(0,o.useState)(""),[b,y]=(0,o.useState)(null);(0,o.useEffect)(()=>{(0,u.getSession)().then(e=>{var l;e&&(null===(l=e.user)||void 0===l?void 0:l.name)&&(0,c.PR)(e.user.name).then(e=>{x(e),(0,c.XZ)(s,e.username).then(e=>{null!=e&&(y(e),g(e.stars),j(e.comment))})})})},[f]),(0,o.useEffect)(()=>{(0,c.PR)(s).then(e=>{m(e)})},[s]);let C=async()=>{let e;null!=d&&(v(!0),(e=null==b?await (0,c.xi)({comment:w,stars:h,target:s,author:d.username}):await (0,c.g8)(b.id,{comment:w,stars:h})).changes&&e.changes>0?window.location.href="/seller/".concat(s):S("Something went wrong. Try again."))};return null==d?(0,n.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full",children:"Log in"}):(0,n.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full",children:(0,n.jsxs)(t.Zb,{className:"w-[400px]",children:[(0,n.jsxs)(t.Ol,{children:[(0,n.jsx)(t.ll,{children:"Create your review"}),(0,n.jsx)(t.SZ,{children:"Write your review for the seller below."})]}),(0,n.jsxs)(t.aY,{className:"flex flex-col items-center gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,n.jsx)("span",{className:"text-lg",children:"Seller"}),(0,n.jsxs)("a",{href:"/seller/".concat(s),className:"flex flex-row justify-start items-center gap-4 ps-4 rounded-xl rounded-lg border p-2",children:[(0,n.jsx)("img",{src:null==f?void 0:f.profilePic,className:"w-12 h-12 rounded-xl border"}),(0,n.jsx)("span",{className:"text-sm underline",children:null==f?void 0:f.username})]})]}),(0,n.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-2 items-baseline",children:[(0,n.jsx)("span",{className:"text-lg",children:"Rating:"}),(0,n.jsxs)("span",{className:"text-lg "+(h<2?"text-red-500":h<4?"text-yellow-500":"text-green-500"),children:[h," stars"]})]}),(0,n.jsx)(r.i,{className:"w-full",min:0,max:5,step:1,value:[h],onValueChange:e=>{g(e[0])}})]}),(0,n.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,n.jsx)("span",{children:"Additional comments"}),(0,n.jsx)(i.g,{className:"w-full",placeholder:"I love this item...",value:w,onChange:e=>{j(e.target.value)}})]})]}),(0,n.jsx)(t.eW,{className:"w-full",children:(0,n.jsx)(a.z,{disabled:p,className:"w-full",onClick:C,children:p?"Submitting...":""!=N?N:null!=b?"Update review":"Submit review"})})]})})}}},function(e){e.O(0,[732,749,360,77,38,971,472,744],function(){return e(e.s=6127)}),_N_E=e.O()}]);