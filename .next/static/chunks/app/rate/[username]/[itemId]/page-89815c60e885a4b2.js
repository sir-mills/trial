(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{402:function(e,l,s){Promise.resolve().then(s.bind(s,1007))},1007:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return o}});var t=s(7437),a=s(3611),n=s(9598),i=s(8389),c=s(2147),r=s(23),u=s(2749),m=s(2265);function o(e){let{params:l}=e,{itemId:s,username:o}=l,[x,d]=(0,m.useState)(null),[f,h]=(0,m.useState)(null),[g,w]=(0,m.useState)(3),[j,v]=(0,m.useState)(""),[N,p]=(0,m.useState)(!1),[S,b]=(0,m.useState)(""),[y,C]=(0,m.useState)(null);(0,m.useEffect)(()=>{(0,u.getSession)().then(e=>{var l;e&&(null===(l=e.user)||void 0===l?void 0:l.name)&&(0,r.PR)(e.user.name).then(e=>{d(e),(0,r.XZ)(s,e.username).then(e=>{null!=e&&(C(e),w(e.stars),v(e.comment))})})})},[f]),(0,m.useEffect)(()=>{(0,r.PF)(s).then(e=>{h(e)})},[s]);let _=async()=>{let e;null!=x&&(p(!0),(e=null==y?await (0,r.xi)({comment:j,stars:g,target:s,author:x.username}):await (0,r.g8)(y.id,{comment:j,stars:g})).changes&&e.changes>0?window.location.href="/item/".concat(o,"/").concat(s):b("Something went wrong. Try again."))};return null==x?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full",children:"Log in"}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full",children:(0,t.jsxs)(n.Zb,{className:"w-[400px]",children:[(0,t.jsxs)(n.Ol,{children:[(0,t.jsx)(n.ll,{children:"Create your review"}),(0,t.jsx)(n.SZ,{children:"Write your review for the item below."})]}),(0,t.jsxs)(n.aY,{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,t.jsx)("span",{className:"text-lg",children:"Item"}),(0,t.jsxs)("a",{href:"/item/".concat(o,"/").concat(s),className:"flex flex-row justify-start items-center border gap-4 ps-4",children:[(0,t.jsx)("img",{src:null==f?void 0:f.image,className:"w-12 h-12 rounded-xl border"}),(0,t.jsx)("span",{className:"text-sm underline",children:null==f?void 0:f.title})]})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-row gap-2 items-baseline",children:[(0,t.jsx)("span",{className:"text-lg",children:"Rating:"}),(0,t.jsxs)("span",{className:"text-lg "+(g<2?"text-red-500":g<4?"text-yellow-500":"text-green-500"),children:[g," stars"]})]}),(0,t.jsx)(i.i,{className:"w-full",min:0,max:5,step:1,value:[g],onValueChange:e=>{w(e[0])}})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full gap-2",children:[(0,t.jsx)("span",{children:"Additional comments"}),(0,t.jsx)(c.g,{className:"w-full",placeholder:"I love this item...",value:j,onChange:e=>{v(e.target.value)}})]})]}),(0,t.jsx)(n.eW,{className:"w-full",children:(0,t.jsx)(a.z,{disabled:N,className:"w-full",onClick:_,children:N?"Submitting...":""!=S?S:null!=y?"Update review":"Submit review"})})]})})}}},function(e){e.O(0,[732,749,360,77,38,971,472,744],function(){return e(e.s=402)}),_N_E=e.O()}]);